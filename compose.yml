services:
  dnsserver:
    build: dnsserver
    hostname: darthvader
    networks:
      rededns:
          ipv4_address: 192.168.20.10
    volumes:
      - ./dnsserver/conf/db.192.168.20:/var/cache/bind/db.192.168.20
      - ./dnsserver/conf/db.starwars.lan:/var/cache/bind/db.starwars.lan
      - ./dnsserver/conf/named.conf.local:/etc/bind/named.conf.local
      - ./dnsserver/conf/named.conf.options:/etc/bind/named.conf.options
  client1:  
    build: debian
    hostname: eq1
    networks:
      rededns:
          ipv4_address: 192.168.20.100
    dns:
      - 192.168.20.10
      - 192.168.20.11
  dns2:
    build: dns2
    hostname: darthsidious
    networks:
      rededns:
          ipv4_address: 192.168.20.11
    volumes:
      - ./dns2/conf/named.conf.local:/etc/bind/named.conf.local    
      - ./dnsserver/conf/named.conf.options:/etc/bind/named.conf.options
networks:
  rededns:
    ipam:
      config:
        - subnet: 192.168.20.0/24
